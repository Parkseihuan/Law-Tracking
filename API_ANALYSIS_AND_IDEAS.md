# 국가법령정보센터 Open API 분석 및 구현 아이디어

## 📋 현재 상황

### API 승인 상태
- 승인키: `psh`
- 승인 완료 확인됨

### 테스트 결과
현재 서버 환경에서는 법제처 API에 대한 접근이 차단되어 있습니다 (403 Access Denied).

**가능한 원인:**
1. IP 주소 기반 접근 제한
2. API 키 형식 확인 필요 (일반적으로 공공데이터포털 API 키는 더 긴 문자열)
3. 추가 인증 절차 필요
4. 네트워크 환경 제한

**권장 조치:**
- 로컬 PC 환경에서 테스트
- 공공데이터포털(data.go.kr)에서 실제 API 키 형식 재확인
- API 키가 "psh"가 정확한지 확인 (보통 30-40자 이상의 영숫자 조합)

---

## 🔍 국가법령정보센터 Open API 주요 서비스

### 1. 법령 정보 서비스

#### 1.1 법령 검색 (lawSearch.do)
**기능:** 법령명, 키워드로 법령 검색
**주요 파라미터:**
- `query`: 검색어
- `target`: law (법령), elaw (영문법령)
- `display`: 표시 개수
- `type`: XML/JSON

**응답 정보:**
- 법령명
- 법령 일련번호 (MST)
- 공포일자
- 시행일자
- 소관부처
- 개정이력

#### 1.2 법령 상세 조회 (lawService.do)
**기능:** 특정 법령의 상세 정보 및 전문(全文) 조회
**주요 파라미터:**
- `MST`: 법령 일련번호
- `type`: XML/JSON

**응답 정보:**
- 법령 전문
- 조문별 내용
- 부칙
- 별표/서식

#### 1.3 법령 개정이유 조회 (RevsInfo.do)
**기능:** 법령의 개정이유 및 주요 내용 조회
**주요 파라미터:**
- `MST`: 법령 일련번호

**응답 정보:**
- 개정일자
- 개정이유
- 주요 개정 내용
- 시행일자

#### 1.4 법령 연혁 조회 (HRCInfo.do)
**기능:** 법령의 제·개정 연혁 조회
**주요 파라미터:**
- `MST`: 법령 일련번호

**응답 정보:**
- 제정일
- 개정일 목록
- 각 개정의 법률번호
- 개정 유형 (전부개정, 일부개정 등)

### 2. 판례 정보 서비스

#### 2.1 판례 검색 (PrecSearch.do)
**기능:** 판례 검색
**주요 파라미터:**
- `query`: 검색어
- `display`: 표시 개수

#### 2.2 판례 상세 조회 (PrecService.do)
**기능:** 판례 상세 정보 조회

### 3. 행정규칙 정보 서비스

#### 3.1 행정규칙 검색 (AdmRulSearch.do)
**기능:** 행정규칙 검색 및 조회

### 4. 자치법규 정보 서비스

#### 4.1 자치법규 검색 (OrdinSearch.do)
**기능:** 지방자치단체 조례/규칙 검색

---

## 💡 구현 아이디어 및 기능 제안

### 🎯 핵심 기능 1: 법령 개정 모니터링 시스템

#### 기본 개념
특정 법령(사립학교법, 고등교육법 등)을 주기적으로 모니터링하여 개정 사항 발생 시 알림

#### 구현 방법

```python
# 구조
1. 감시 대상 법령 목록 관리
2. 정기적으로 법령 정보 조회 (일일 1-2회)
3. 이전 버전과 비교
4. 변경 감지 시 알림 발송
5. 변경 이력 데이터베이스 저장
```

#### 주요 기능
- **법령 등록**: 모니터링할 법령 추가/제거
- **자동 확인**: 스케줄러를 통한 주기적 확인 (cron, APScheduler)
- **변경 감지**:
  - 시행일자 변경
  - 법령 내용 변경 (해시값 비교)
  - 개정이력 추가
- **알림 방식**:
  - 이메일
  - Slack/Discord Webhook
  - 텔레그램 봇
  - 웹 대시보드

#### 데이터 저장 구조
```
laws/
├── database.json  # 법령 기본 정보
├── history/       # 개정 이력
│   ├── 사립학교법_20250101.json
│   └── 고등교육법_20250115.json
└── cache/         # API 응답 캐시
```

---

### 🎯 핵심 기능 2: 신구대조표 자동 생성

#### 기본 개념
법령 개정 시 변경 전/후 내용을 비교하여 신구대조표 생성

#### 구현 방법

```python
# 구조
1. 개정 전 법령 내용 저장
2. 개정 후 법령 내용 조회
3. 조문별 diff 비교
4. HTML/PDF 형식 신구대조표 생성
```

#### 기술 스택
- **텍스트 비교**: `difflib` (Python 내장)
- **HTML 생성**: `jinja2` 템플릿
- **PDF 변환**: `weasyprint` 또는 `reportlab`
- **엑셀 생성**: `openpyxl`

#### 출력 형식
```
┌──────────┬──────────────┬──────────────┐
│ 조항     │ 개정 전      │ 개정 후      │
├──────────┼──────────────┼──────────────┤
│ 제3조    │ 구 내용      │ 신 내용      │
│          │ (강조 표시)  │ (강조 표시)  │
└──────────┴──────────────┴──────────────┘
```

---

### 🎯 핵심 기능 3: 법령 변경 대시보드

#### 기본 개념
웹 인터페이스로 법령 변경 사항을 한눈에 확인

#### 주요 화면

1. **메인 대시보드**
   - 최근 개정 법령 목록
   - 감시 중인 법령 상태
   - 개정 예정 법령 (시행일 기준)

2. **법령 상세 페이지**
   - 법령 전문
   - 개정 이력 타임라인
   - 신구대조표 다운로드

3. **알림 설정 페이지**
   - 감시 대상 법령 관리
   - 알림 수신 방법 설정
   - 알림 주기 설정

#### 기술 스택
- **Backend**: Flask 또는 FastAPI
- **Frontend**: React 또는 Vue.js (또는 간단히 Bootstrap)
- **Database**: SQLite 또는 PostgreSQL
- **스케줄러**: APScheduler

---

### 🎯 핵심 기능 4: 법령 검색 및 비교 도구

#### 기능
- 여러 법령 간 조문 비교
- 키워드 기반 법령 검색
- 연관 법령 추천
- 법령 개정 통계

---

## 📊 권장 시스템 아키텍처

### 구성도
```
┌─────────────────────────────────────────┐
│         사용자 인터페이스               │
│  (웹 대시보드 / 이메일 / 메신저)       │
└────────────┬────────────────────────────┘
             │
┌────────────▼────────────────────────────┐
│         애플리케이션 레이어             │
│  - Flask/FastAPI 웹 서버               │
│  - API 라우터                          │
│  - 비즈니스 로직                       │
└────────────┬────────────────────────────┘
             │
┌────────────▼────────────────────────────┐
│         서비스 레이어                   │
│  - 법령 모니터링 서비스                │
│  - 신구대조표 생성 서비스              │
│  - 알림 서비스                         │
│  - 스케줄러 (APScheduler)              │
└────────────┬────────────────────────────┘
             │
┌────────────▼────────────────────────────┐
│         데이터 레이어                   │
│  - API 클라이언트                      │
│  - 데이터베이스 (SQLite/PostgreSQL)    │
│  - 캐시 시스템                         │
└─────────────────────────────────────────┘
             │
┌────────────▼────────────────────────────┐
│    국가법령정보센터 Open API            │
└─────────────────────────────────────────┘
```

### 디렉토리 구조
```
Law-Tracking/
├── app/
│   ├── __init__.py
│   ├── api/              # API 클라이언트
│   │   ├── law_api.py
│   │   └── cache.py
│   ├── services/         # 비즈니스 로직
│   │   ├── monitor.py
│   │   ├── comparison.py
│   │   └── notification.py
│   ├── models/           # 데이터 모델
│   │   ├── law.py
│   │   └── history.py
│   ├── web/              # 웹 인터페이스
│   │   ├── routes.py
│   │   └── templates/
│   └── scheduler/        # 스케줄러
│       └── tasks.py
├── data/                 # 데이터 저장소
│   ├── database.db
│   └── cache/
├── logs/                 # 로그 파일
├── config/               # 설정 파일
│   └── settings.py
├── tests/                # 테스트
├── requirements.txt
├── .env
└── main.py              # 진입점
```

---

## 🚀 단계별 구현 계획

### Phase 1: 기본 인프라 (1-2주)
- [x] API 클라이언트 개발
- [ ] 데이터베이스 스키마 설계
- [ ] 기본 데이터 모델 구현
- [ ] API 응답 파싱 및 저장

### Phase 2: 모니터링 시스템 (2-3주)
- [ ] 법령 검색 및 저장
- [ ] 스케줄러 구현
- [ ] 변경 감지 로직
- [ ] 기본 알림 시스템 (이메일)

### Phase 3: 신구대조표 생성 (2주)
- [ ] 텍스트 diff 알고리즘
- [ ] 신구대조표 HTML 생성
- [ ] PDF 변환 기능
- [ ] 엑셀 내보내기

### Phase 4: 웹 대시보드 (2-3주)
- [ ] Flask/FastAPI 설정
- [ ] REST API 구현
- [ ] 웹 UI 개발
- [ ] 사용자 설정 기능

### Phase 5: 고급 기능 (선택)
- [ ] 법령 간 비교 기능
- [ ] AI 기반 변경 사항 요약
- [ ] 모바일 앱
- [ ] 다중 사용자 지원

---

## 🔧 기술 스택 추천

### Backend
- **Python 3.10+**
- **FastAPI** (현대적인 API) 또는 **Flask** (간단함)
- **SQLAlchemy** (ORM)
- **APScheduler** (작업 스케줄링)
- **Requests** (HTTP 클라이언트)

### Frontend (웹 대시보드)
- **Option 1 (간단)**: Jinja2 템플릿 + Bootstrap
- **Option 2 (현대적)**: React + Material-UI

### 데이터 저장
- **SQLite** (시작용, 단일 사용자)
- **PostgreSQL** (프로덕션, 다중 사용자)
- **Redis** (캐싱, 선택사항)

### 알림
- **SMTP** (이메일)
- **python-telegram-bot** (텔레그램)
- **slack-sdk** (Slack)

### 문서 생성
- **difflib** (비교)
- **jinja2** (템플릿)
- **weasyprint** (PDF)
- **openpyxl** (Excel)

---

## 📝 중요 고려사항

### 1. API 사용 제한
- 공공데이터포털 API는 일일 트래픽 제한이 있을 수 있음
- 캐싱 전략 필수
- 불필요한 API 호출 최소화

### 2. 데이터 정합성
- 법령 버전 관리 철저히
- 원본 데이터 보존
- 변경 이력 추적

### 3. 법적 고려사항
- 법령 정보는 공공데이터이지만 출처 명시 필요
- 상업적 이용 시 라이선스 확인

### 4. 성능 최적화
- 대용량 법령 처리 시 메모리 관리
- 비동기 처리 활용
- 데이터베이스 인덱싱

---

## 🎓 학습 및 참고 자료

### 공식 문서
- 국가법령정보센터: https://www.law.go.kr
- Open API 가이드: https://open.law.go.kr/LSO/openApi/guideList.do
- 공공데이터포털: https://www.data.go.kr/data/15000115/openapi.do

### 관련 기술
- FastAPI: https://fastapi.tiangolo.com/
- APScheduler: https://apscheduler.readthedocs.io/
- difflib: https://docs.python.org/3/library/difflib.html

---

## 🤔 다음 단계 제안

### 즉시 실행 가능한 작업:

1. **API 키 재확인**
   - 공공데이터포털에서 실제 API 키 형식 확인
   - 로컬 환경에서 API 테스트

2. **프로토타입 개발**
   - 단일 법령 모니터링 기능부터 시작
   - 간단한 CLI 도구 제작

3. **데이터 모델 설계**
   - 법령 정보 저장 구조 결정
   - 데이터베이스 스키마 작성

4. **알림 시스템 선택**
   - 이메일, Slack, 텔레그램 중 선호하는 방식 결정

### 질문 사항:

1. 어떤 알림 방식을 선호하시나요? (이메일, 텔레그램, Slack 등)
2. 웹 대시보드가 필요하신가요, 아니면 CLI 도구로 충분한가요?
3. 모니터링 주기는 어느 정도가 적당할까요? (일일, 주간)
4. 다른 사용자와 공유할 계획이 있으신가요?
